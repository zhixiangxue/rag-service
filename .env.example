# ============================================
# Environment Variables for RAG Service
# ============================================
# Copy this file to .env and fill in your actual values

# ============================================
# API Keys
# ============================================

# OpenAI API Key
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API Key (Claude)
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Alibaba Bailian (百炼) API Key
# Get your API key from: https://help.aliyun.com/zh/model-studio/
BAILIAN_API_KEY=your_bailian_api_key_here

# Cohere API Key (for reranking)
# Get your API key from: https://dashboard.cohere.com/api-keys
COHERE_API_KEY=your_cohere_api_key_here

# ============================================
# Database Configuration
# ============================================
DATABASE_PATH=./rag_service.db

# ============================================
# Vector Store Configuration
# ============================================
VECTOR_STORE_TYPE=qdrant
VECTOR_STORE_HOST=localhost
VECTOR_STORE_PORT=6333
VECTOR_STORE_GRPC_PORT=6334

# TODO: Remove these default fallback settings when dataset management is fully implemented
# Currently used as fallback when dataset_id is not found in database
# This allows the API to work before proper dataset management is adopted by the business
DEFAULT_COLLECTION_NAME=mortgage_guidelines
DEFAULT_VECTOR_ENGINE=qdrant

# ============================================
# Full-Text Search Configuration
# ============================================
MEILISEARCH_HOST=http://localhost:7700
# MEILISEARCH_API_KEY=your_meilisearch_api_key

# ============================================
# Embedding Configuration
# ============================================
# Options: openai/text-embedding-3-small, openai/text-embedding-3-large, bailian/...
EMBEDDING_URI=openai/text-embedding-3-small

# ============================================
# LLM Configuration
# ============================================
# LLM Provider: openai, anthropic, bailian
LLM_PROVIDER=openai
# LLM Model: gpt-4o-mini, gpt-4o, claude-3-5-sonnet-20241022, etc.
LLM_MODEL=gpt-4o-mini

# ============================================
# Reranker Configuration
# ============================================
# Reranker Provider: cohere, sentence-transformers
RERANKER_PROVIDER=cohere

# ============================================
# File Storage Configuration
# ============================================
UPLOAD_DIR=./uploads
STORAGE_TYPE=local

# S3 Configuration (if using S3 storage)
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key

# ============================================
# Document Processing Configuration
# ============================================
# PDF Processing
MAX_PAGES_PER_PART=100
PAGE_OVERLAP=2

# Reader Configuration
# Options: docling, markitdown, mineru
DOCUMENT_READER=docling

# Processing Settings (used in document_processor.py)
USE_GPU=true
NUM_THREADS=8
MAX_CHUNK_TOKENS=1200
TABLE_MAX_TOKENS=1500
TARGET_TOKEN_SIZE=800
NUM_KEYWORDS=5

# ============================================
# API Server Configuration
# ============================================
API_HOST=0.0.0.0
API_PORT=8000

# Public-facing host for distributed workers (optional)
# If not set, defaults to API_HOST (or localhost if API_HOST is 0.0.0.0)
# For distributed deployments, set this to your server's public IP or domain
# Example: API_PUBLIC_HOST=13.56.109.233
# API_PUBLIC_HOST=

# ============================================
# Worker Configuration
# ============================================
# API_BASE_URL 已自动从 API_HOST 和 API_PORT 构建，无需手动配置
WORKER_POLL_INTERVAL=5
WORKER_MAX_RETRIES=3

# ============================================
# HuggingFace Configuration
# ============================================
# HuggingFace Mirror (国内镜像)
# 解决 HuggingFace 连接问题
HF_ENDPOINT=https://hf-mirror.com
# 备选镜像（如果上面的不行）：
# HF_ENDPOINT=https://huggingface.co
